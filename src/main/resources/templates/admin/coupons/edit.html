<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/admin}">

<th:block layout:fragment="page_head">
    <title>Ch·ªânh s·ª≠a m√£ gi·∫£m gi√° | Admin</title>
</th:block>

<body>
<th:block layout:fragment="content">
    <div style="padding: 20px;">
        <h1>‚úèÔ∏è Ch·ªânh s·ª≠a m√£ gi·∫£m gi√°</h1>
        <p>C·∫≠p nh·∫≠t th√¥ng tin m√£ gi·∫£m gi√°</p>
        
        <div style="margin: 20px 0;">
            <a href="/admin/coupons" style="background: #6c757d; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px;">
                ‚Üê Quay l·∫°i danh s√°ch
            </a>
        </div>

        <!-- Form Edit -->
        <div style="background: white; padding: 30px; border-radius: 8px; border: 1px solid #ddd; max-width: 800px;">
            <form th:action="@{'/admin/coupons/' + ${coupon.id} + '/update'}" method="post">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                    <div>
                        <label style="display: block; margin-bottom: 5px; font-weight: bold;">M√£ gi·∫£m gi√° *</label>
                        <input type="text" name="code" th:value="${coupon.code}" required
                               style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
                        <small style="color: #666;">M√£ duy nh·∫•t, ch·ªâ ch·ª©a ch·ªØ c√°i v√† s·ªë</small>
                    </div>
                    
                    <div>
                        <label style="display: block; margin-bottom: 5px; font-weight: bold;">T√™n m√£ gi·∫£m gi√° *</label>
                        <input type="text" name="name" th:value="${coupon.name}" required
                               style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                    <div>
                        <label style="display: block; margin-bottom: 5px; font-weight: bold;">Lo·∫°i gi·∫£m gi√° *</label>
                        <select name="discountType" required
                                style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
                            <option value="PERCENTAGE" th:selected="${coupon.discountType.name() == 'PERCENTAGE'}">% Ph·∫ßn trƒÉm</option>
                            <option value="FIXED_AMOUNT" th:selected="${coupon.discountType.name() == 'FIXED_AMOUNT'}">üí∞ S·ªë ti·ªÅn c·ªë ƒë·ªãnh</option>
                        </select>
                    </div>
                    
                    <div>
                        <label style="display: block; margin-bottom: 5px; font-weight: bold;">Gi√° tr·ªã gi·∫£m *</label>
                        <input type="number" name="discountValue" th:value="${coupon.discountValue}" 
                               min="1" step="0.01" required
                               style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
                        <small style="color: #666;">Nh·∫≠p % (1-100) ho·∫∑c s·ªë ti·ªÅn</small>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                    <div>
                        <label style="display: block; margin-bottom: 5px; font-weight: bold;">Gi√° tr·ªã ƒë∆°n h√†ng t·ªëi thi·ªÉu</label>
                        <input type="number" name="minOrderValue" th:value="${coupon.minOrderValue}" 
                               min="0" step="1000"
                               style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
                        <small style="color: #666;">ƒê·ªÉ tr·ªëng n·∫øu kh√¥ng gi·ªõi h·∫°n</small>
                    </div>
                    
                    <div>
                        <label style="display: block; margin-bottom: 5px; font-weight: bold;">S·ªë l·∫ßn s·ª≠ d·ª•ng t·ªëi ƒëa</label>
                        <input type="number" name="usageLimit" th:value="${coupon.usageLimit}" 
                               min="1"
                               style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
                        <small style="color: #666;">ƒê·ªÉ tr·ªëng n·∫øu kh√¥ng gi·ªõi h·∫°n</small>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                    <div>
                        <label style="display: block; margin-bottom: 5px; font-weight: bold;">Ng√†y b·∫Øt ƒë·∫ßu *</label>
                        <input type="datetime-local" name="startDate" required
                               th:value="${coupon.startDate != null ? #temporals.format(coupon.startDate, 'yyyy-MM-ddTHH:mm') : ''}"
                               style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
                    </div>
                    
                    <div>
                        <label style="display: block; margin-bottom: 5px; font-weight: bold;">Ng√†y k·∫øt th√∫c *</label>
                        <input type="datetime-local" name="endDate" required
                               th:value="${coupon.endDate != null ? #temporals.format(coupon.endDate, 'yyyy-MM-ddTHH:mm') : ''}"
                               style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
                    </div>
                </div>

                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">M√¥ t·∫£</label>
                    <textarea name="description" rows="3" th:text="${coupon.description}"
                              style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; resize: vertical;"></textarea>
                </div>

                <div style="margin-bottom: 30px;">
                    <label style="display: flex; align-items: center; gap: 10px;">
                        <input type="checkbox" name="isActive" th:checked="${coupon.isActive}" value="true">
                        <span style="font-weight: bold;">K√≠ch ho·∫°t m√£ gi·∫£m gi√°</span>
                    </label>
                </div>

                <div style="display: flex; gap: 15px;">
                    <button type="submit" style="background: #28a745; color: white; padding: 12px 30px; border: none; border-radius: 5px; cursor: pointer; font-size: 16px;">
                        üíæ C·∫≠p nh·∫≠t m√£ gi·∫£m gi√°
                    </button>
                    <a href="/admin/coupons" style="background: #6c757d; color: white; padding: 12px 30px; text-decoration: none; border-radius: 5px; font-size: 16px;">
                        ‚ùå H·ªßy
                    </a>
                </div>
            </form>
        </div>
    </div>
</th:block>

</body>
</html>