<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/admin}">

<th:block layout:fragment="page_head">
    <title>T·∫°o m√£ gi·∫£m gi√° | Admin</title>
</th:block>

<body>
<th:block layout:fragment="content">
    <div style="padding: 20px;">
        <h1>‚ûï T·∫°o m√£ gi·∫£m gi√° m·ªõi</h1>
        <p>T·∫°o m√£ gi·∫£m gi√° ƒë·ªÉ thu h√∫t kh√°ch h√†ng v√† tƒÉng doanh s·ªë</p>
        
        <div style="margin: 20px 0;">
            <a href="/admin/coupons" style="background: #6c757d; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px;">
                ‚Üê Quay l·∫°i danh s√°ch
            </a>
        </div>

        <!-- Form Create -->
        <div style="background: white; padding: 30px; border-radius: 8px; border: 1px solid #ddd; max-width: 800px;">
            <form th:action="@{/admin/coupons/create}" method="post" th:object="${couponCreateRequest}">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                    <div>
                        <label style="display: block; margin-bottom: 5px; font-weight: bold;">M√£ gi·∫£m gi√° *</label>
                        <input type="text" th:field="*{code}" required
                               style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;"
                               placeholder="VD: WELCOME10">
                        <small style="color: #666;">M√£ duy nh·∫•t, ch·ªâ ch·ª©a ch·ªØ c√°i v√† s·ªë</small>
                        <div style="color: red; font-size: 12px;" th:if="${#fields.hasErrors('code')}" th:errors="*{code}"></div>
                    </div>
                    
                    <div>
                        <label style="display: block; margin-bottom: 5px; font-weight: bold;">T√™n m√£ gi·∫£m gi√° *</label>
                        <input type="text" th:field="*{name}" required
                               style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;"
                               placeholder="VD: M√£ gi·∫£m gi√° ch√†o m·ª´ng">
                        <div style="color: red; font-size: 12px;" th:if="${#fields.hasErrors('name')}" th:errors="*{name}"></div>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                    <div>
                        <label style="display: block; margin-bottom: 5px; font-weight: bold;">Lo·∫°i gi·∫£m gi√° *</label>
                        <select th:field="*{discountType}" required
                                style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
                            <option value="">Ch·ªçn lo·∫°i gi·∫£m gi√°</option>
                            <option value="PERCENTAGE">% Ph·∫ßn trƒÉm</option>
                            <option value="FIXED_AMOUNT">üí∞ S·ªë ti·ªÅn c·ªë ƒë·ªãnh</option>
                        </select>
                        <div style="color: red; font-size: 12px;" th:if="${#fields.hasErrors('discountType')}" th:errors="*{discountType}"></div>
                    </div>
                    
                    <div>
                        <label style="display: block; margin-bottom: 5px; font-weight: bold;">Gi√° tr·ªã gi·∫£m *</label>
                        <input type="number" th:field="*{discountValue}" 
                               min="1" step="0.01" required
                               style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;"
                               placeholder="Nh·∫≠p gi√° tr·ªã">
                        <small style="color: #666;">Nh·∫≠p % (1-100) ho·∫∑c s·ªë ti·ªÅn</small>
                        <div style="color: red; font-size: 12px;" th:if="${#fields.hasErrors('discountValue')}" th:errors="*{discountValue}"></div>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                    <div>
                        <label style="display: block; margin-bottom: 5px; font-weight: bold;">Gi√° tr·ªã ƒë∆°n h√†ng t·ªëi thi·ªÉu</label>
                        <input type="number" th:field="*{minOrderAmount}" 
                               min="0" step="1000"
                               style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;"
                               placeholder="ƒê·ªÉ tr·ªëng n·∫øu kh√¥ng gi·ªõi h·∫°n">
                        <small style="color: #666;">ƒê·ªÉ tr·ªëng n·∫øu kh√¥ng gi·ªõi h·∫°n</small>
                        <div style="color: red; font-size: 12px;" th:if="${#fields.hasErrors('minOrderAmount')}" th:errors="*{minOrderAmount}"></div>
                    </div>
                    
                    <div>
                        <label style="display: block; margin-bottom: 5px; font-weight: bold;">S·ªë l·∫ßn s·ª≠ d·ª•ng t·ªëi ƒëa</label>
                        <input type="number" th:field="*{usageLimit}" 
                               min="1"
                               style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;"
                               placeholder="ƒê·ªÉ tr·ªëng n·∫øu kh√¥ng gi·ªõi h·∫°n">
                        <small style="color: #666;">ƒê·ªÉ tr·ªëng n·∫øu kh√¥ng gi·ªõi h·∫°n</small>
                        <div style="color: red; font-size: 12px;" th:if="${#fields.hasErrors('usageLimit')}" th:errors="*{usageLimit}"></div>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                    <div>
                        <label style="display: block; margin-bottom: 5px; font-weight: bold;">Ng√†y b·∫Øt ƒë·∫ßu</label>
                        <input type="datetime-local" th:field="*{startDate}"
                               style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
                        <small style="color: #666;">ƒê·ªÉ tr·ªëng ƒë·ªÉ c√≥ hi·ªáu l·ª±c ngay</small>
                        <div style="color: red; font-size: 12px;" th:if="${#fields.hasErrors('startDate')}" th:errors="*{startDate}"></div>
                    </div>
                    
                    <div>
                        <label style="display: block; margin-bottom: 5px; font-weight: bold;">Ng√†y k·∫øt th√∫c</label>
                        <input type="datetime-local" th:field="*{endDate}"
                               style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
                        <small style="color: #666;">ƒê·ªÉ tr·ªëng n·∫øu kh√¥ng c√≥ th·ªùi h·∫°n</small>
                        <div style="color: red; font-size: 12px;" th:if="${#fields.hasErrors('endDate')}" th:errors="*{endDate}"></div>
                    </div>
                </div>

                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">M√¥ t·∫£</label>
                    <textarea th:field="*{description}" rows="3"
                              style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; resize: vertical;"
                              placeholder="M√¥ t·∫£ chi ti·∫øt v·ªÅ m√£ gi·∫£m gi√°..."></textarea>
                    <div style="color: red; font-size: 12px;" th:if="${#fields.hasErrors('description')}" th:errors="*{description}"></div>
                </div>

                <div style="margin-bottom: 30px;">
                    <label style="display: flex; align-items: center; gap: 10px;">
                        <input type="checkbox" th:field="*{active}" value="true" checked>
                        <span style="font-weight: bold;">K√≠ch ho·∫°t m√£ gi·∫£m gi√°</span>
                    </label>
                    <small style="color: #666;">M√£ gi·∫£m gi√° s·∫Ω c√≥ th·ªÉ s·ª≠ d·ª•ng ngay sau khi t·∫°o</small>
                </div>

                <!-- Error Messages -->
                <div th:if="${errorMessage}" style="background: #f8d7da; color: #721c24; padding: 15px; border-radius: 5px; margin-bottom: 20px; border: 1px solid #f5c6cb;">
                    <strong>L·ªói:</strong> <span th:text="${errorMessage}"></span>
                </div>

                <div style="display: flex; gap: 15px;">
                    <button type="submit" style="background: #28a745; color: white; padding: 12px 30px; border: none; border-radius: 5px; cursor: pointer; font-size: 16px;">
                        üíæ T·∫°o m√£ gi·∫£m gi√°
                    </button>
                    <a href="/admin/coupons" style="background: #6c757d; color: white; padding: 12px 30px; text-decoration: none; border-radius: 5px; font-size: 16px;">
                        ‚ùå H·ªßy
                    </a>
                </div>
            </form>
        </div>
    </div>
</th:block>

</body>
</html>